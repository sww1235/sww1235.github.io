<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <meta name="author" content="Stephen Walker-Weinshenker">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="styles/main.css">
  <link rel="icon" href="../images/favicon.ico" type="image/x-icon">
<title>fpga-notes</title>
</head>
<body>
<div id="top">
    <a href="index.html">
        <img src="images/logo.png" alt="Home" width="280" height="32">
    </a>

</div>
<div id="topnavbar">
    <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="stuff.html">Stuff</a>
            <ul>
                <li><a href="https://github.com/sww1235">Github</a></li>
                <li><a href="wiki/index.html">Wiki</a></li>

            </ul>
        </li>
        <li><a href="blog-contents">Blog</a></li>
        <li><a href="contact.html">Contact</a></li>

    </ul>
</div>
<h1 id="top">
FPGA Notes
</h1>
<h2 id="lattice-fpgas">
Lattice Ice40 FPGAs
</h2>
<p>Using internal libraries in VHDL need to look at actual contents of files in install directory, located at <code>./lscc/iCEcube2.2016.02/vhdl/sb_ice_syn_vital.vhd</code>. This contains the compiler prototypes.</p>
<p>might need to add:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span> sb_ice40_components_syn;</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">use</span> sb_ice40_components_syn<span class="ot">.</span>components<span class="ot">.</span>all;</a></code></pre></div>
<p>in order to get things to work.</p>
<p>Also might need to declare components manually.</p>
<p>Code from <a href="http://we.easyelectronics.ru/teplofizik/podklyuchenie-vstroennogo-modulya-tokovogo-drayvera-fpga-serii-ice5-ice40-ultra.html" class="uri">http://we.easyelectronics.ru/teplofizik/podklyuchenie-vstroennogo-modulya-tokovogo-drayvera-fpga-serii-ice5-ice40-ultra.html</a></p>
<p>Verilog Library description:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode verilog"><code class="sourceCode verilog"><a class="sourceLine" id="cb2-1" title="1">SB_RGB_DRV RGB_DRIVER (</a>
<a class="sourceLine" id="cb2-2" title="2">.RGBLEDEN(ENABLE_LED),</a>
<a class="sourceLine" id="cb2-3" title="3">.RGB0PWM(RGB0),</a>
<a class="sourceLine" id="cb2-4" title="4">.RGB1PWM(RGB1),</a>
<a class="sourceLine" id="cb2-5" title="5">.RGB2PWM(RGB2),</a>
<a class="sourceLine" id="cb2-6" title="6">.RGBPU(led_power_up),</a>
<a class="sourceLine" id="cb2-7" title="7">.RGB0(LED0),</a>
<a class="sourceLine" id="cb2-8" title="8">.RGB1(LED1),</a>
<a class="sourceLine" id="cb2-9" title="9">.RGB2(LED2)</a>
<a class="sourceLine" id="cb2-10" title="10">);</a>
<a class="sourceLine" id="cb2-11" title="11"><span class="kw">defparam</span> RGB_DRIVER.RGB0_CURRENT = <span class="st">&quot;0b111111&quot;</span>;</a>
<a class="sourceLine" id="cb2-12" title="12"><span class="kw">defparam</span> RGB_DRIVER.RGB1_CURRENT = <span class="st">&quot;0b111111&quot;</span>;</a>
<a class="sourceLine" id="cb2-13" title="13"><span class="kw">defparam</span> RGB_DRIVER.RGB2_CURRENT = <span class="st">&quot;0b111111&quot;</span>;</a></code></pre></div>
<p>VHDL component:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><a class="sourceLine" id="cb3-1" title="1">component SB_RGB_DRV is</a>
<a class="sourceLine" id="cb3-2" title="2">        generic (</a>
<a class="sourceLine" id="cb3-3" title="3">                RGB0_CURRENT <span class="ot">:</span> string <span class="ot">:=</span> <span class="st">&quot;0b000000&quot;</span>;</a>
<a class="sourceLine" id="cb3-4" title="4">                RGB1_CURRENT <span class="ot">:</span> string <span class="ot">:=</span> <span class="st">&quot;0b000000&quot;</span>;</a>
<a class="sourceLine" id="cb3-5" title="5">                RGB2_CURRENT <span class="ot">:</span> string <span class="ot">:=</span> <span class="st">&quot;0b000000&quot;</span>);</a>
<a class="sourceLine" id="cb3-6" title="6">        port (RGBLEDEN<span class="ot">,</span> RGBPU<span class="ot">,</span> RGB0PWM<span class="ot">,</span> RGB1PWM<span class="ot">,</span> RGB2PWM<span class="ot">:</span> in std_logic;</a>
<a class="sourceLine" id="cb3-7" title="7">                RGB0<span class="ot">,</span> RGB1<span class="ot">,</span> RGB2<span class="ot">:</span> out std_logic);</a>
<a class="sourceLine" id="cb3-8" title="8">end component;</a></code></pre></div>
<pre class="tags"><code>Contributing, info</code></pre>
</body>
</html>
